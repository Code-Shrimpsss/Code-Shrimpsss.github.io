<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shrimps - blog - 山花开似锦，涧水湛如蓝</title><meta name="author" content="Shrimpsss"><meta name="copyright" content="Shrimpsss"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="What’s past is prologue.">
<meta property="og:type" content="website">
<meta property="og:title" content="Shrimps - blog">
<meta property="og:url" content="https://github.io/page/2/index.html">
<meta property="og:site_name" content="Shrimps - blog">
<meta property="og:description" content="What’s past is prologue.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.io/img/avatar.jpg">
<meta property="article:author" content="Shrimpsss">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://github.io/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Shrimpsss","link":"Link: ","source":"Source: Shrimps - blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Shrimps - blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-05-29 15:41:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/cosfont.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/icon.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_1.css" ><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_2.css" ><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><link rel="stylesheet" href="/css/custom@1.0.0.css"><link rel="stylesheet" href="/css/color@1.0.0.css"><link rel="stylesheet" link="/css/loading_wizard.css"/><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/login.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Time</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-film"></i><span> photo</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Shrimps - blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Time</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-film"></i><span> photo</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/12/Redis%E9%85%8D%E7%BD%AE%E5%93%A8%E5%85%B5/" title="Redis配置哨兵">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/2d56e9883b9c2bd9.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Redis配置哨兵"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/12/Redis%E9%85%8D%E7%BD%AE%E5%93%A8%E5%85%B5/" title="Redis配置哨兵">Redis配置哨兵</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-11T16:08:00.000Z" title="Created 2021-12-12 00:08:00">2021-12-12</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">
Redis sentinel（哨兵）主从切换技术的方法是：当主服务器宕机后，需要手动把一台从服务器切换为主服务器，这就需要人工干预，费事费力，还会造成一段时间内服务不可用。这不是一种推荐的方式，更多时候，我们优先考虑哨兵模式。
哨兵概论与运行机制哨兵模式是一种特殊的模式，首先Redis提供了哨兵的命令，哨兵是一个独立的进程，作为进程，它会独立运行。其原理是哨兵通过发送命令，等待Redis服务器响应，从而监控运行的多个Redis实例。

Redis Sentinel的主要功能Sentinel的主要功能包括主节点存活检测、主从运行情况检测、自动故障转移（failover）、主从切换。Redis的Sentinel最小配置是一主一从。 Redis的Sentinel系统可以用来管理多个Redis服务器，该系统可以执行以下四个任务：

监控
Sentinel会不断的检查主服务器和从服务器是否正常运行。

通知
当被监控的某个Redis服务器出现问题，Sentinel通过API脚本向管理员或者其他的应用程序发送通知。

自动故障转移
当主节点不能正常工作时，Sentinel会开始一次自动的故障转移 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/10/Redis%E4%B8%BB%E4%BB%8E%E9%85%8D%E7%BD%AE/" title="Redis主从配置">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/2d56e9883b9c2bd9.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Redis主从配置"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/10/Redis%E4%B8%BB%E4%BB%8E%E9%85%8D%E7%BD%AE/" title="Redis主从配置">Redis主从配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-09T16:08:00.000Z" title="Created 2021-12-10 00:08:00">2021-12-10</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">
本教程环境基于 Ubuntu 8.3.0 版本 linux 系统配置 Redis 主从主从概念
  ⼀个 master 可以拥有多个 slave，⼀个 slave ⼜可以拥有多个 slave，如此下去，形成了强⼤的多级服务器集群架构
  master 用来写数据，slave 用来读数据，经统计：网站的读写比率是 10:1
  通过主从配置可以实现读写分离


主从配置查看当前主机 IP 地址（记住你的 ip 地址）

若没有联网可以前往我的另一篇文章配置网络
删除 redis 默认执行的 ip 端口
若不删除的话 默认会执行 彻底清除完毕再开启主从配置

查看当前 redis 所有进程
1ps -aux|grep redis

除了后缀为 grep --color=auto redis 其余全都删除
123# kill 删除命令 -9 强制 23131端口号# 端口为你要删除的进程的第二个字段(名称后面的数字)sudo kill -9 23131

配置主
进入 /etc/redis 文件目录修改 redis.conf (主)文件
 1234# 进入目录cd /etc/redis#  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/09/Redis%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" title="Redis基本操作">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/2d56e9883b9c2bd9.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Redis基本操作"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/09/Redis%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" title="Redis基本操作">Redis基本操作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-08T16:08:00.000Z" title="Created 2021-12-09 00:08:00">2021-12-09</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">
基本命令服务器端
启动服务端

1redis-server


查看帮助手册

1redis-server --help


查看redis服务器进程

1ps -aux|grep redis


杀死redis服务器

12# sudo kell 删除 -9 强制 指定服务器 (强制删除命令)sudo kell -9 pid


使用指定的配置文件开启redis服务

12# sudo redis-server 源路径sudo redis-server /etc/redis/redis.conf

客户端
启动客户端

1redis-cli


查看帮助手册

1redis-cli --help


运行测试命令

12# 客户端中ping


切换数据库

12# select [0-15] 默认使用第一个，共有16个数据库select 7

</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/09/Redis%E5%AE%89%E8%A3%85/" title="Redis安装">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/2d56e9883b9c2bd9.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Redis安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/09/Redis%E5%AE%89%E8%A3%85/" title="Redis安装">Redis安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-08T16:08:00.000Z" title="Created 2021-12-09 00:08:00">2021-12-09</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">
官网英文：https://redis.io/中文：http://www.redis.cn/参考：[菜鸟Redis](https://www.runoob.com/redis/redis-install.html)
安装方式一
使用apt，注意提前检查下apt的源，如果不对 就修改镜像源
安装前 sudo apt-get update
安装redis命令如下：

1sudo apt-get install redis-server 

注意：安装完后关闭终端重新开启，才能使用

安装完后检查 执行程序都在 usr/bin/下


默认安装后会启动，命令如下
123sudo service redis-server start # 启动sudo service redis-server stop  # 停止sudo service redis-server restart  # 重启
查看进程 
1ps -aux|grep redis

如果出现 *redis-server :6379 默认端口 6379 ，说明redis正在运行


进入操作环境
现在我们输入 redis-cli 命令 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/09/Redis%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/" title="Redis数据操作">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/2d56e9883b9c2bd9.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Redis数据操作"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/09/Redis%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/" title="Redis数据操作">Redis数据操作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-08T16:08:00.000Z" title="Created 2021-12-09 00:08:00">2021-12-09</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">
数据结构Redis 数据类型分为：字符串类型、散列类型、列表类型、集合类型、有序集合类型。
Redis 这么火，它运行有多块？一台普通的笔记本电脑，可以在 1 秒钟内完成十万次的读写操作。
Redis 是 key-value 的数据结构，每条数据都是⼀个键值对键的类型是字符串，键的类型是字符串
原子操作：最小的操作单位，不能继续拆分。即最小的执行单位，不会被其他命令插入。高并发下不存在竞态条件。
KEY 的命名：一个良好的建议是 article:1:title 来存储 ID 为 1 的文章的标题。
注意：键不能重复

keys 基本命令
Keys *
  该命令用于查看所有键。

Keys &#39;xx&#39;
  该命令用于查看名称中包含 xx 的键

type key
  该命令用于查看键对应的 value 的类型

del key  该命令用于在 key 存在时删除 key。

dump key  序列化给定 key ，并返回被序列化的值。

exists key  检查给定 key 是否存在。

expire key seconds  为给定 key 设置过期时间，以秒计 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/08/Django%E7%8A%B6%E6%80%81%E4%BF%9D%E6%8C%81/" title="Django状态保持">     <img class="post_bg" src="https://img1.baidu.com/it/u=2206900918,1696468527&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Django状态保持"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/08/Django%E7%8A%B6%E6%80%81%E4%BF%9D%E6%8C%81/" title="Django状态保持">Django状态保持</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-07T16:08:00.000Z" title="Created 2021-12-08 00:08:00">2021-12-08</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Django/">Django</a></span></div><div class="content">
状态保持
浏览器请求服务器是无状态的。
无状态：指一次用户请求时，浏览器、服务器无法知道之前这个用户做过什么，每次请求都是一次新的请求。
无状态原因：浏览器与服务器是使用Socket套接字进行通信的，服务器将请求结果返回给浏览器之后，会关闭当前的Socket连接，而且服务器也会在处理页面完毕之后销毁页面对象。
有时需要保持下来用户浏览的状态，比如用户是否登录过，浏览过哪些商品等
实现状态保持主要有两种方式：
在客户端存储信息使用Cookie
在服务器端存储信息使用Session



CookieCookie的工作原理由于HTTP是一种无状态的协议，服务器单从网络连接上无从知道客户身份。怎么办呢？
就给客户端们颁发一个通行证吧，每人一个，无论谁访问都必须携带自己通行证。这样服务器就能从通行证上确认客户身份了。
Cookie的特点
Cookie是由服务器生成，存储在浏览器端的一小段文本信息，以键值对方式进行存储。
通过浏览器访问一个网站时，会将本地存储的跟网站相关的所有cookie信息发送给该网站的服务器。
Cookie是基于域名安全的。
Cookie是有过期时间的，如果不指定，默认关 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/05/Django%E8%A7%86%E5%9B%BE/" title="Django视图">     <img class="post_bg" src="https://img1.baidu.com/it/u=2206900918,1696468527&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Django视图"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/05/Django%E8%A7%86%E5%9B%BE/" title="Django视图">Django视图</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-04T16:08:00.000Z" title="Created 2021-12-05 00:08:00">2021-12-05</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Django/">Django</a></span></div><div class="content">
视图定义
一个视图函数，简称视图，就是应用中views.py文件中的函数，它接受 Web 请求并且返回 Web 响应。

视图必须返回一个HttpResponse对象或子对象（JsonResponse  HttpResponseRedirect）作为响应

视图负责接受Web请求HttpRequest，进行逻辑处理，返回Web响应HttpResponse给请求者

视图层中有两个重要的对象：**请求对象(request)**与 **响应对象(HttpResponse)**。

处理过程：



视图使用
在项目的urls.py文件定位应用的urls.py
12345678from django.contrib import admin # 默认配置from django.urls import path, include # 导入includeurlpatterns = [    path(&#x27;admin/&#x27;, admin.site.urls), # 默认配置    path(&#x27;&#x27;, include(&#x27;book.urls&#x27;)) ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/30/Django%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91/" title="Django数据库开发">     <img class="post_bg" src="https://img1.baidu.com/it/u=2206900918,1696468527&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Django数据库开发"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/30/Django%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91/" title="Django数据库开发">Django数据库开发</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-11-29T16:08:00.000Z" title="Created 2021-11-30 00:08:00">2021-11-30</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Django/">Django</a></span></div><div class="content">
使用Django进行数据库开发的提示 ：

MVT设计模式中的Model, 专门负责和数据库交互.对应(models.py)
由于Model中内嵌了ORM框架, 所以不需要直接面向数据库编程.
而是定义模型类, 通过模型类和对象完成数据库表的增删改查.
ORM框架就是把数据库表的行与相应的对象建立关联, 互相转换.使得数据库的操作面向对象.

mysql配置1. 在mysql中创建一个项目要使用的数据库
1create database bookdb charset=utf8;

2. setting里修改为mysql配置
12345678910DATABASES = &#123;    &#x27;default&#x27;: &#123;        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,        &#x27;HOST&#x27;: &#x27;127.0.0.1&#x27;,  # 数据库主机(默认)        &#x27;PORT&#x27;: 3306,  # 数据库端口         ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/26/Mysql%E6%8C%91%E6%88%98%E9%A2%98/" title="sql必知必会挑战题答案">     <img class="post_bg" src="https://s3.bmp.ovh/imgs/2021/12/b8dacb96c7f542f3.png" onerror="this.onerror=null;this.src='/img/login.gif'" alt="sql必知必会挑战题答案"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/26/Mysql%E6%8C%91%E6%88%98%E9%A2%98/" title="sql必知必会挑战题答案">sql必知必会挑战题答案</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-11-25T16:00:00.000Z" title="Created 2021-11-26 00:00:00">2021-11-26</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Mysql/">Mysql</a></span></div><div class="content">挑战题答案第 1 课 没有挑战题第 2 课 检索数据1. 编写SQL语句，从Customers表中检索所有的ID（cust_id）。12SELECT cust_idFROM Customers;
2. OrderItems表包含了所有已订购的产品（有些已被订购多次）。编写SQL语句，检索并列出已订购产品（prod_id）的清单（不用列每个订单，只列出不同产品的清单）。提示：最终应该显示 7 行。12SELECT DISTINCT prod_idFROM OrderItems;
3. 编写SQL语句，检索Customers表中所有的列，再编写另外的SELECT语句，仅检索顾客的ID。使用注释，注释掉一条SELECT语句，以便运行另一条SELECT语句。（当然，要测试这两个语句。）SELECT *12# SELECT cust_idFROM Customers;
第 3 课 排序检索数据1. 编写SQL语句，从Customers中检索所有的顾客名称（cust_names），并按从Z到A的顺序显示结果。123SELECT cust_nameFROM CustomersORDER BY cus ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/25/Django%E6%A8%A1%E5%9E%8B/" title="Django模型">     <img class="post_bg" src="https://img1.baidu.com/it/u=2206900918,1696468527&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Django模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/25/Django%E6%A8%A1%E5%9E%8B/" title="Django模型">Django模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-11-24T16:08:00.000Z" title="Created 2021-11-25 00:08:00">2021-11-25</time></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Django/">Django</a></span></div><div class="content">
定义模型类1） 数据库表名
模型类如果未指明表名，Django默认以小写app应用名_小写模型类名为数据库表名。
可通过db_table指明数据库表名。
2） 关于主键
django会为表创建自动增长的主键列，每个模型只能有一个主键列，如果使用选项设置某属性为主键列后django不会再创建自动增长的主键列。
默认创建的主键列属性为id，可以使用pk代替，pk全拼为primary key。
3） 属性命名限制

不能是python的保留关键字。

不允许使用连续的下划线，这是由django的查询方式决定的。

定义属性时需要指定字段类型，通过字段类型的参数指定选项，语法如下：
1属性=models.字段类型(选项)

4）字段类型



类型
说明



AutoField
自动增长的IntegerField，通常不用指定，不指定时Django会自动创建属性名为id的自动增长属性


BooleanField
布尔字段，值为True或False


NullBooleanField
支持Null、True、False三种值


CharField
字符串，参数max_length表示最 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/login.gif'" alt="avatar"/><div class="author-info__name">Shrimpsss</div><div class="author-info__description">What’s past is prologue.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/jiaoyanxia" target="_blank" title="github"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://shrimps.top/" target="_blank" title="Search"><i class="fas fa-balance-scale"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">本站主要为 2022末-2022初 本人的学习记录站点，已不再更新。点击上方👆前往最新站点。<div class="twopeople"></div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/06/Docker%E4%B9%8B%E5%AE%B9%E5%99%A8/" title="Docker之容器"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcdn.ancii.com%2Farticle%2Fimage%2Fv1%2FQj%2Fzb%2FRO%2FORzjbQVFJasX5aR2DaTg2_Zx5KSH75KdTtVIpx5BAiZSOFE6UDSXmdPNK0vBK1kx6D9KnKYbT3PZJrhT421k4RvmNO9bq5YW3aUlHXtRyug.jpg&amp;refer=http%3A%2F%2Fcdn.ancii.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1644045441&amp;t=0e3bb5c7d14b370a1b1078f47965ecce" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Docker之容器"/></a><div class="content"><a class="title" href="/2022/01/06/Docker%E4%B9%8B%E5%AE%B9%E5%99%A8/" title="Docker之容器">Docker之容器</a><time datetime="2022-01-05T16:08:00.000Z" title="Created 2022-01-06 00:08:00">2022-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/06/Docker%E4%B9%8B%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/" title="Docker之简介与配置"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcdn.ancii.com%2Farticle%2Fimage%2Fv1%2FQj%2Fzb%2FRO%2FORzjbQVFJasX5aR2DaTg2_Zx5KSH75KdTtVIpx5BAiZSOFE6UDSXmdPNK0vBK1kx6D9KnKYbT3PZJrhT421k4RvmNO9bq5YW3aUlHXtRyug.jpg&amp;refer=http%3A%2F%2Fcdn.ancii.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1644045441&amp;t=0e3bb5c7d14b370a1b1078f47965ecce" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Docker之简介与配置"/></a><div class="content"><a class="title" href="/2022/01/06/Docker%E4%B9%8B%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/" title="Docker之简介与配置">Docker之简介与配置</a><time datetime="2022-01-05T16:08:00.000Z" title="Created 2022-01-06 00:08:00">2022-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/06/Docker%E4%B9%8B%E9%95%9C%E5%83%8F/" title="Docker之镜像"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcdn.ancii.com%2Farticle%2Fimage%2Fv1%2FQj%2Fzb%2FRO%2FORzjbQVFJasX5aR2DaTg2_Zx5KSH75KdTtVIpx5BAiZSOFE6UDSXmdPNK0vBK1kx6D9KnKYbT3PZJrhT421k4RvmNO9bq5YW3aUlHXtRyug.jpg&amp;refer=http%3A%2F%2Fcdn.ancii.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1644045441&amp;t=0e3bb5c7d14b370a1b1078f47965ecce" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Docker之镜像"/></a><div class="content"><a class="title" href="/2022/01/06/Docker%E4%B9%8B%E9%95%9C%E5%83%8F/" title="Docker之镜像">Docker之镜像</a><time datetime="2022-01-05T16:08:00.000Z" title="Created 2022-01-06 00:08:00">2022-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/02/js%E6%95%B0%E7%BB%84/" title="JavaScript 数组"><img src="https://s3.bmp.ovh/imgs/2021/12/4d4b264f31082964.png" onerror="this.onerror=null;this.src='/img/login.gif'" alt="JavaScript 数组"/></a><div class="content"><a class="title" href="/2022/01/02/js%E6%95%B0%E7%BB%84/" title="JavaScript 数组">JavaScript 数组</a><time datetime="2022-01-01T16:08:00.000Z" title="Created 2022-01-02 00:08:00">2022-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/28/Django%E8%B7%A8%E5%9F%9FCORS/" title="Django 跨域CORS"><img src="https://img1.baidu.com/it/u=2206900918,1696468527&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/login.gif'" alt="Django 跨域CORS"/></a><div class="content"><a class="title" href="/2021/12/28/Django%E8%B7%A8%E5%9F%9FCORS/" title="Django 跨域CORS">Django 跨域CORS</a><time datetime="2021-12-27T16:08:00.000Z" title="Created 2021-12-28 00:08:00">2021-12-28</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Django/" style="font-size: 1.42em; color: #99a6b7">Django</a> <a href="/tags/Docker/" style="font-size: 1.26em; color: #999fa8">Docker</a> <a href="/tags/JS-ES6/" style="font-size: 1.1em; color: #999">JS-ES6</a> <a href="/tags/JavaScript/" style="font-size: 1.42em; color: #99a6b7">JavaScript</a> <a href="/tags/Linux/" style="font-size: 1.26em; color: #999fa8">Linux</a> <a href="/tags/Mysql/" style="font-size: 1.42em; color: #99a6b7">Mysql</a> <a href="/tags/Python/" style="font-size: 1.18em; color: #999ca1">Python</a> <a href="/tags/Redis/" style="font-size: 1.5em; color: #99a9bf">Redis</a> <a href="/tags/VUE/" style="font-size: 1.1em; color: #999">VUE</a> <a href="/tags/Vue/" style="font-size: 1.18em; color: #999ca1">Vue</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/" style="font-size: 1.34em; color: #99a3b0">前端技术</a> <a href="/tags/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" style="font-size: 1.1em; color: #999">配置文件</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">January 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">December 2021</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">November 2021</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">October 2021</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">51</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-06-09T16:03:36.000Z"></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">63.9k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-05-29T07:41:03.033Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Shrimpsss</div><div class="footer_custom_text">If I never meet you again... Good morning, good afternoon, and good night...</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 3000);</script></div><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/1akeejt2cqlfgo9zgrexxyxy58uvn7p0.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/bb/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>